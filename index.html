<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RAID Guide</title>
<meta name="description" content="Kompakter, professioneller RAID-Guide: Levels, Controller, Schnittstellen, Kenngrößen und Empfehlung. Messe-optimiertes Design, responsive." />

<!-- ========================
     Styles (Light + Dark + Print + Responsive)
     ======================== -->
<style>
  :root{
    --bg: #f5f7fa;
    --card: #ffffff;
    --text: #0f172a;
    --muted: #475569;
    --accent: #2563eb;
    --accent-2: #06b6d4;
    --border: #e2e8f0;
    --success: #16a34a;
    --warn: #f59e0b;
    --danger: #ef4444;
    --glass: rgba(255,255,255,0.6);
  }

  /* dark mode variables */
  [data-theme="dark"]{
    --bg: #0b1220;
    --card: #0f1724;
    --text: #e6eef8;
    --muted: #9aa7bf;
    --accent: #60a5fa;
    --accent-2: #22d3ee;
    --border: #15202b;
    --glass: rgba(255,255,255,0.03);
  }

  /* Base */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.5;
    scroll-behavior:smooth; /* smooth scroll */
    padding-bottom:40px;
  }

  a{color:var(--accent);text-decoration:none}
  a:focus{outline:3px solid rgba(37,99,235,0.18);outline-offset:3px;border-radius:6px}

  /* Layout container */
  .container{
    max-width:1150px;
    margin:0 auto;
    padding:18px;
  }

  /* Header */
  header{
    position:sticky;
    top:0;
    z-index:60;
    background:linear-gradient(180deg,var(--glass),transparent);
    backdrop-filter: blur(6px) saturate(120%);
    border-bottom:1px solid var(--border);
  }
  .nav{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
    padding:12px 18px;
    max-width:1150px;
    margin:0 auto;
  }
  .brand{
    display:flex;
    gap:12px;
    align-items:center;
  }
  .logo{
    width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:10px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    box-shadow:0 6px 18px rgba(2,6,23,0.12);
  }
  .brand h1{font-size:16px;margin:0;color:var(--card);font-weight:700}
  .brand p{font-size:12px;margin:0;color:var(--card);opacity:0.92}

  /* Desktop nav links */
  .links{display:flex;gap:14px;align-items:center}
  .links a{font-size:14px;color:var(--text);padding:8px 10px;border-radius:8px}
  .links a:hover{background:var(--glass)}
  .cta{padding:8px 12px;background:var(--accent);color:white;border-radius:8px;font-weight:700}

  /* Mobile menu button */
  .menu-btn{
    display:none;
    background:transparent;border:0;font-size:22px;padding:8px;border-radius:8px;
    color:var(--text);
  }
  .menu-btn[aria-expanded="true"]{background:var(--glass)}

  /* Header controls (dark mode, print, qr) */
  .controls{display:flex;gap:8px;align-items:center}
  .switch{
    display:inline-flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--border);
    padding:6px 8px;border-radius:999px;
  }
  .switch input{display:none}
  .switch .knob{
    width:36px;height:20px;background:var(--border);border-radius:999px;position:relative;
  }
  .switch .knob::after{
    content:"";position:absolute;left:3px;top:3px;width:14px;height:14px;border-radius:50%;background:white;transition:transform .22s ease;
  }
  [data-theme="dark"] .switch .knob{background:rgba(255,255,255,0.06)}
  [data-theme="dark"] .switch .knob::after{transform:translateX(16px)}

  /* Main hero */
  .hero{
    display:grid;
    grid-template-columns:1fr 360px;
    gap:22px;
    align-items:start;
    margin:22px auto 10px;
  }
  .intro{padding:18px;border-radius:14px;background:var(--card);border:1px solid var(--border);box-shadow:0 6px 20px rgba(2,6,23,0.04)}
  .intro h2{margin:0 0 8px;font-size:22px}
  .intro p{color:var(--muted);margin:0 0 10px}

  .side{
    padding:16px;border-radius:14px;background:linear-gradient(180deg,var(--card),transparent);
    border:1px solid var(--border);
  }
  .level-table{width:100%;border-collapse:collapse}
  .level-table th,.level-table td{padding:10px;border:1px solid var(--border);font-size:13px}
  .level-table th{background:linear-gradient(90deg,var(--accent-2),var(--accent));color:white;font-weight:700}

  /* Section cards */
  section{margin-top:28px}
  .card{
    background:var(--card);
    border:1px solid var(--border);
    padding:18px;border-radius:12px;
    box-shadow:0 6px 18px rgba(2,6,23,0.04);
    transition:transform .36s cubic-bezier(.2,.9,.3,1),opacity .36s ease;
    opacity:0; transform:translateY(18px);
  }
  .card.visible{opacity:1; transform:none}

  .card h3{margin-top:0;margin-bottom:8px}

  .note{background:#fff8e6;border:1px solid #facc15;padding:10px;border-radius:8px;color:#79460a;font-weight:600}

  /* images placeholders */
  .media{margin-top:12px;border-radius:10px;overflow:hidden;border:1px solid var(--border)}
  .media img{display:block;width:100%;height:auto}

  /* grid layout for cards inside sections */
  .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
  .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
  .stack{display:block}

  /* footer */
  footer{margin-top:40px;padding:30px 10px;color:var(--muted);text-align:center;border-top:1px solid var(--border)}

  /* tiny badges */
  .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--glass);border:1px solid var(--border);font-size:13px;color:var(--muted)}

  /* responsive */
  @media (max-width:1000px){
    .hero{grid-template-columns:1fr 320px}
    .grid-3{grid-template-columns:repeat(2,1fr)}
  }
  @media (max-width:820px){
    .hero{grid-template-columns:1fr}
    .side{order:2}
    .menu-btn{display:inline-flex}
    .links{display:none}
    .controls{display:none}
  }
  @media (max-width:600px){
    .grid-3{grid-template-columns:1fr}
    .grid-2{grid-template-columns:1fr}
    .intro{padding:14px}
    .brand h1{font-size:14px}
    .brand p{font-size:11px}
    .logo{width:40px;height:40px}
  }

  /* print stylesheet */
  @media print{
    body{background:white;color:black}
    header, .menu-btn, .cta, .controls, .pill {display:none!important}
    .container{padding:0}
    .card{box-shadow:none;border:1px solid #ddd}
    img{max-width:100%;height:auto}
    section{page-break-inside:avoid}
  }

  /* animations for mobile menu */
  .mobile-menu {
    display:none;
    position:absolute;
    top:64px;left:0;right:0;
    background:var(--card);
    border-top:1px solid var(--border);
    box-shadow:0 12px 30px rgba(2,6,23,0.08);
    padding:12px;
    transform-origin:top;
    animation: slideDown .28s ease both;
  }
  @keyframes slideDown{
    from{transform:scaleY(0);opacity:0}
    to{transform:scaleY(1);opacity:1}
  }

  /* accessibility focus */
  a:focus, button:focus {outline:2px dashed var(--accent); outline-offset:3px}

  .mode-switch {
    position: absolute;
    top: 15px;
    right: 15px;
    z-index: 9999; /* über alles gestellt */
}

.mode-switch input {
    display: none;
}

.mode-switch label {
    width: 40px;
    height: 20px;
    background: var(--card-bg);
    border-radius: 20px;
    display: block;
    cursor: pointer;
    position: relative;
    border: 1px solid var(--border-color);
}

.mode-switch label::after {
    content: "";
    width: 16px;
    height: 16px;
    background: var(--accent);
    position: absolute;
    top: 2px;
    left: 2px;
    border-radius: 50%;
    transition: 0.3s;
}

#modeToggle:checked + label::after {
    left: 22px;
}

</style>
</head>
<body data-theme="light">

<!-- ========================
     Header
     ======================== -->
<header>
  <div class="nav container" role="navigation" aria-label="Hauptnavigation">
    <div class="brand" style="gap:10px;">
      <!-- Minimalist SVG logo (editable) -->
      <div class="logo" aria-hidden="true">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="2" y="2" width="20" height="20" rx="5" fill="white" opacity="0.08"/>
          <path d="M5 16 L9 9 L11 12 L13 8 L19 18" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div>
        <h1 style="margin:0;color:var(--card)">RAID Guide</h1>
        <p style="margin:0;font-size:11px;color:var(--card);opacity:0.9">Kompakt</p>
      </div>
    </div>

    <nav style="display:flex;align-items:center;gap:12px;">
      <div class="links" aria-hidden="false">
        <a href="#was-ist-raid">Was ist RAID?</a>
        <a href="#controller">Aufgabe</a>
        <a href="#schnittstellen">Schnittstellen</a>
        <a href="#kenngroessen">Kenngrößen</a>
        <a href="#bewertung">Bewertung</a>
        <a href="#fazit">Fazit</a>
      </div>

      <div class="controls" role="region" aria-label="Seiteneinstellungen">
        <!-- Dark mode switch -->
        <label class="switch" title="Dark / Light" aria-hidden="false">
          <input id="themeToggle" type="checkbox" aria-label="Dark mode an/aus">
          <div class="knob" aria-hidden="true"></div>
        </label>

        <!-- Print button -->
        <button class="cta" id="printBtn" title="Druckansicht">Drucken</button>
      </div>

      <!-- Mobile menu button -->
      <button class="menu-btn" id="menuBtn" aria-expanded="false" aria-controls="mobileMenu" aria-label="Menü öffnen">
        ☰
      </button>

      <!-- CTA -->
      <a class="cta" href="#fazit">Short</a>
    </nav>
  </div>

  <!-- Mobile Menu (animated) -->
  <div id="mobileMenu" class="mobile-menu" role="menu" aria-hidden="true" style="display:none;">
    <a href="#was-ist-raid" role="menuitem" onclick="closeMobile()">Was ist RAID?</a><br>
    <a href="#controller" role="menuitem" onclick="closeMobile()">Aufgabe</a><br>
    <a href="#schnittstellen" role="menuitem" onclick="closeMobile()">Schnittstellen</a><br>
    <a href="#kenngroessen" role="menuitem" onclick="closeMobile()">Kenngrößen</a><br>
    <a href="#bewertung" role="menuitem" onclick="closeMobile()">Bewertung</a><br>
    <a href="#fazit" role="menuitem" onclick="closeMobile()">Fazit</a><br>
    <hr style="border:none;border-top:1px solid var(--border);margin:8px 0">
    <button onclick="window.print()" style="padding:8px 12px;border-radius:8px;background:var(--accent);color:white;border:0;cursor:pointer">Drucken</button>
  </div>
  
  <!-- Mode Switch (immer sichtbar) 
<div class="mode-switch">
    <input type="checkbox" id="modeToggle">
    <label for="modeToggle"></label>
</div>
     -->
</header>

<!-- ========================
     Content
     ======================== -->
<main class="container" id="top">

  <!-- HERO / QUICK SUMMARY -->
  <div class="hero" role="region" aria-label="Kurzeinführung">
    <div class="intro">
      <h2>RAID verständlich: Sicherheit & Tempo für deine Daten</h2>
      <p style="color:var(--muted)">
        RAID kombiniert mehrere Laufwerke zu einem Verbund — Ziel: Ausfallsicherheit, Leistung oder beides.
      </p>

      <div style="margin-top:12px">
        <div style="border-left:4px solid var(--accent);padding:10px;border-radius:8px;background:var(--glass);font-weight:600">
          RAID ist kein Backup — Backup bleibt Pflicht.
        </div>
      </div>
    </div>

    <aside class="side" aria-label="Schnellvergleich RAID-Level">
      <h3 style="margin:0 0 8px">Schnellvergleich</h3>
      <table class="level-table" role="table" aria-label="RAID Level Tabelle">
        <thead>
          <tr><th>Level</th><th>Ziel</th><th>Min.</th><th>Kapazität</th></tr>
        </thead>
        <tbody>
          <tr><td>RAID 0</td><td>Tempo</td><td>2</td><td>Summe</td></tr>
          <tr><td>RAID 1</td><td>Spiegel</td><td>2</td><td>1×</td></tr>
          <tr><td>RAID 5</td><td>Parität</td><td>3</td><td>n−1</td></tr>
          <tr><td>RAID 6</td><td>Doppelte Parität</td><td>4</td><td>n−2</td></tr>
          <tr><td>RAID 10</td><td>Tempo+Redundanz</td><td>4</td><td>~50%</td></tr>
        </tbody>
      </table>
      <p style="color:var(--muted);font-size:13px;margin-top:8px;">n = Anzahl Laufwerke</p>
    </aside>
  </div>

  <!-- ========================
       1) Was ist RAID?
       ======================== -->
  <section id="was-ist-raid" class="card" tabindex="-1" aria-labelledby="title-1">
    <h2 id="title-1">Was ist RAID?</h2>

    <p>RAID steht für <em>Redundant Array of Independent Disks</em>. Mehrere physische Laufwerke werden logisch zusammengefasst. Je nach Level liegt der Fokus auf Leistung, Verfügbarkeit oder beidem.</p>

    <h3>Wichtige RAID-Level</h3>
    <ul>
      <li><strong>RAID 0</strong>: Striping — maximale Geschwindigkeit, keine Redundanz.</li>
      <li><strong>RAID 1</strong>: Spiegelung — einfache, sehr zuverlässige Redundanz.</li>
      <li><strong>RAID 5</strong>: Parität — guter Kompromiss aus Kapazität und Schutz (1 Platte toleriert).</li>
      <li><strong>RAID 6</strong>: Doppelte Parität — 2 Platten tolerierbar; sicherer bei großen Arrays.</li>
      <li><strong>RAID 10</strong>: Spiegelung + Striping — hohe Leistung & Redundanz.</li>
    </ul>

    <div class="note" role="note" aria-live="polite">Mythos: RAID macht Daten unzerstörbar — Realität: RAID reduziert Laufwerksausfallrisiken. Backups & Monitoring weiterhin erforderlich.</div>

    <div class="media" aria-hidden="false">
  
      <img src="raid0.webp" alt="Platzhaltergrafik"/>
      <img src="raid1.webp" alt="Platzhaltergrafik"/>
      <img src="raid5.webp" alt="Platzhaltergrafik"/>
      <img src="raid6.webp" alt="Platzhaltergrafik"/>
      <img src="raid10.webp" alt="Platzhaltergrafik"/>
      <img src="vorteile.png" alt="Platzhaltergrafik"/>
    </div>
  </section>

  <!-- ========================
       2) RAID-Controller
       ======================== -->
  <section id="controller" class="card" tabindex="-1" aria-labelledby="title-2">
    <h2 id="title-2">Aufgabe des Bauteils (RAID-Controller)</h2>

    <div class="grid-3" style="margin-top:10px">
      <div>
        <h3>Datenverteilung</h3>
        <p>Steuert Striping, Mirroring, Parity und definiert die logische Struktur des Arrays.</p>
      </div>
      <div>
        <h3>Fehlerbehandlung</h3>
        <p>Erkennt defekte Sektoren/Laufwerke, markiert Ersatzlaufwerke und startet Rebuilds.</p>
      </div>
      <div>
        <h3>Caching & Queueing</h3>
        <p>Write-Back / Write-Through, Warteschlangenoptimierung, I/O-Priorisierung.</p>
      </div>
    </div>

    <h3 style="margin-top:14px">Hardware vs. Software</h3>
    <ul>
      <li><strong>Software-RAID</strong>: flexibel, günstig, nutzt CPU (z. B. mdadm, ZFS, Storage Spaces).</li>
      <li><strong>Hardware-RAID</strong>: dedizierte Controller mit Cache/BBU; stabiler bei großen HDD-Arrays.</li>
    </ul>

    <div class="media"><img src="raidController.png" alt="Platzhalter"></div>
  </section>

  <!-- ========================
       3) Schnittstellen
       ======================== -->
  <section id="schnittstellen" class="card" tabindex="-1" aria-labelledby="title-3">
    <h2 id="title-3">Anbindung an den Rechner / Schnittstellen</h2>

    <div class="grid-2" style="margin-top:8px">
      <div>
        <h3>Interne Schnittstellen</h3>
        <ul>
          <li><strong>SATA</strong>: bis 6 Gbit/s – typisch für HDD/2.5" SSD.</li>
          <li><strong>SAS</strong>: 12–24 Gbit/s, Dual-Port, robustere Fehlermechanismen.</li>
          <li><strong>NVMe (PCIe)</strong>: sehr hohe IOPS & niedrige Latenz.</li>
        </ul>
      </div>
      <div>
        <h3>Externe Anbindung</h3>
        <ul>
          <li><strong>USB 3.x</strong>: einfach, für kleine Verbunde.</li>
          <li><strong>Thunderbolt</strong>: bis 40 Gbit/s für schnelle externe Arrays.</li>
          <li><strong>NAS / SAN</strong>: iSCSI, NFS/SMB, Fibre Channel — RAID liegt im NAS/SAN.</li>
        </ul>
      </div>
    </div>

    <div class="note" style="margin-top:12px">Praxisregel: Die Bus-/Schnittstellenbandbreite muss zur Summe der Laufwerksleistung passen, sonst limitiert der Bus die Performance.</div>
  </section>

  <!-- ========================
       4) Kenngrößen
       ======================== -->
  <section id="kenngroessen" class="card" tabindex="-1" aria-labelledby="title-4">
    <h2 id="title-4">Die wichtigsten Kenngrößen</h2>

    <div class="grid-3" style="margin-top:8px">
      <div>
        <h3>Kapazität</h3>
        <p>RAID 0 = Summe; RAID 1 = kleinste Platte; RAID 5 = Summe−1; RAID 6 = Summe−2; RAID 10 ≈ 50%.</p>
      </div>
      <div>
        <h3>IOPS & Durchsatz</h3>
        <p>IOPS = viele kleine Operationen/s (Datenbanken); Durchsatz = MB/s bei großen Dateien (Backups, Video).</p>
      </div>
      <div>
        <h3>Latenz</h3>
        <p>NVMe deutlich niedriger als SATA/SAS/HDD; Paritäts-RAIDs erhöhen Schreiblatenz.</p>
      </div>
    </div>

    <div class="grid-3" style="margin-top:12px">
      <div>
        <h3>Fehlertoleranz</h3>
        <p>RAID 1: Spiegel je 1; RAID 5: 1; RAID 6: 2; RAID 10: abhängig.</p>
      </div>
      <div>
        <h3>URE / MTTDL</h3>
        <p>Unrecoverable Read Error beeinflusst Rebuild-Risiko — relevant bei großen HDDs.</p>
      </div>
      <div>
        <h3>Rebuild-Zeit</h3>
        <p>Dauer der Wiederherstellung (Stunden–Tage bei großen HDDs; währenddessen erhöhtes Risiko).</p>
      </div>
    </div>
  </section>

  <!-- ========================
       5) Eignung & Bewertung
       ======================== -->
  <section id="bewertung" class="card" tabindex="-1" aria-labelledby="title-5">
    <h2 id="title-5">Eignung und Leistungsbewertung</h2>

    <h3>Schritt-für-Schritt</h3>
    <ol>
      <li><strong>Ziel:</strong> Verfügbarkeit, Leistung oder Kapazität?</li>
      <li><strong>Workload:</strong> Random I/O vs. sequentiell?</li>
      <li><strong>Medien:</strong> HDD für Kapazität, SSD/NVMe für IOPS.</li>
      <li><strong>Level passieren:</strong> RAID 0/1/5/6/10 je nach Ziel.</li>
      <li><strong>Schnittstelle prüfen:</strong> SATA, SAS, PCIe/NVMe, Thunderbolt, Netz.</li>
      <li><strong>Controller/Software:</strong> Cache, BBU, Hot-Spare, Monitoring.</li>
      <li><strong>Benchmark:</strong> CrystalDiskMark, fio für objektive Messwerte.</li>
    </ol>

    <h3>Daumenregeln</h3>
    <ul>
      <li>Viele kleine Zugriffe → SSD/NVMe + RAID 10 oder RAID 1.</li>
      <li>Große Dateien → HDD + RAID 6; RAID 5 nur bei kleineren Arrays.</li>
      <li>Viel Schreiblaste → RAID 10 oder RAID 6.</li>
      <li>Größere Platten → RAID 6 wegen URE-Risiko.</li>
    </ul>
  </section>

  <!-- ========================
       6) TL;DR
       ======================== -->
  <section id="fazit" class="card" tabindex="-1" aria-labelledby="title-6">
    <h2 id="title-6">Kurzfazit</h2>
    <ul>
      <li><strong>Tempo + Schutz:</strong> RAID 10 mit SSD/NVMe.</li>
      <li><strong>Kapazität + Sicherheit:</strong> RAID 6 auf HDD + Hot-Spare.</li>
      <li><strong>Einfach & günstig:</strong> RAID 1.</li>
      <li><strong>Nur Tempo:</strong> RAID 0 — nur mit Backup!</li>
    </ul>
  </section>

  <footer role="contentinfo">
    © 2025 RAID Guide · basierend auf technischen Grundlagen & Praxiswerten. (Amin, Finn, Richmond & Serhat)
  </footer>

</main>

<!-- ========================
     Scripts: theme toggle, mobile menu, animations, QR, print
     ======================== -->
<script>
  (function(){
    const root = document.documentElement;
    const body = document.body;
    const themeToggle = document.getElementById('themeToggle');
    const printBtn = document.getElementById('printBtn');
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const qrImg = document.getElementById('qrImg');

    /* ---------- Theme handling (persists in localStorage) ---------- */
    const THEME_KEY = 'raidguide_theme';
    function setTheme(theme){
      if(theme === 'dark'){
        body.setAttribute('data-theme','dark');
        themeToggle.checked = true;
      } else {
        body.setAttribute('data-theme','light');
        themeToggle.checked = false;
      }
      try{ localStorage.setItem(THEME_KEY,theme); }catch(e){}
    }
    // initialize
    (function initTheme(){
      let saved = null;
      try{ saved = localStorage.getItem(THEME_KEY); }catch(e){}
      if(saved){
        setTheme(saved);
      }else{
        // default: respect system pref
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        setTheme(prefersDark ? 'dark' : 'light');
      }
    })();

    themeToggle.addEventListener('change', function(){
      setTheme(this.checked ? 'dark' : 'light');
    });

    /* ---------- Print button ---------- */
    printBtn.addEventListener('click', function(){ window.print(); });

    /* ---------- Mobile menu toggle with animation ---------- */
    function openMobile(){
      mobileMenu.style.display = 'block';
      mobileMenu.setAttribute('aria-hidden','false');
      menuBtn.setAttribute('aria-expanded','true');
    }
    function closeMobile(){
      mobileMenu.style.display = 'none';
      mobileMenu.setAttribute('aria-hidden','true');
      menuBtn.setAttribute('aria-expanded','false');
    }
    menuBtn.addEventListener('click', function(){
      if(mobileMenu.style.display === 'block') closeMobile(); else openMobile();
    });
    // expose to inline handlers
    window.closeMobile = closeMobile;

    /* ---------- IntersectionObserver for reveal animations ---------- */
    const observer = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, {threshold: 0.12});
    document.querySelectorAll('.card').forEach(el => observer.observe(el));

    /* ---------- Accessibility: keyboard close mobile menu on ESC ---------- */
    window.addEventListener('keydown', function(e){
      if(e.key === 'Escape'){
        closeMobile();
      }
    });
     document.addEventListener("DOMContentLoaded", () => {
       const qrImg = document.getElementById("qrImg");
       if (!qrImg) return;
     
       const url = window.location.href;
       const size = 300;
     
       // Reliable Google QR API URL
       const src = "https://chart.googleapis.com/chart?cht=qr&chs=" 
                   + size + "x" + size 
                   + "&chl=" + encodeURIComponent(url);
     
       qrImg.src = src;
     });

    /* ---------- Smooth anchor focusing for keyboard users ---------- */
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', function(e){
        // close mobile menu on link click
        if(mobileMenu.style.display === 'block') closeMobile();
        const id = this.getAttribute('href');
        if(id && id.startsWith('#')){
          const target = document.querySelector(id);
          if(target){
            // let browser handle scroll (smooth) but also focus for screen readers
            setTimeout(()=>{ target.focus({preventScroll:true}); }, 400);
          }
        }
      });
    });

    /* ---------- On large screens: ensure .mobile-menu hidden ---------- */
    window.addEventListener('resize', function(){
      if(window.innerWidth > 820){
        mobileMenu.style.display = 'none';
        mobileMenu.setAttribute('aria-hidden','true');
        menuBtn.setAttribute('aria-expanded','false');
      }
    });

  })();

(function(){
  const THEME_KEY = 'raidguide_theme';
  const body = document.body;

  // support both toggle IDs if one exists
  const toggles = [
    document.getElementById('modeToggle'),
    document.getElementById('themeToggle')
  ].filter(Boolean);

  // helper to apply theme
  function applyTheme(theme) {
    if (theme === 'dark') {
      body.setAttribute('data-theme', 'dark');
    } else {
      body.setAttribute('data-theme', 'light');
    }
    // update all toggle inputs
    toggles.forEach(t => { t.checked = (theme === 'dark'); });
    try { localStorage.setItem(THEME_KEY, theme); } catch(e) {}
  }

  // read saved theme or system preference
  function initTheme() {
    let saved = null;
    try { saved = localStorage.getItem(THEME_KEY); } catch(e) {}
    if (saved === 'dark' || saved === 'light') {
      applyTheme(saved);
      return;
    }
    // fallback: respect system preference
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    applyTheme(prefersDark ? 'dark' : 'light');
  }

  // attach listeners to toggles
  toggles.forEach(t => {
    t.addEventListener('change', function(){
      applyTheme(this.checked ? 'dark' : 'light');
    });
  });

  // init
  initTheme();

  // optional: observe system preference changes and auto-switch only if user hasn't explicitly set a preference
  // If you prefer to always respect system changes (unless user set an explicit saved value), uncomment:
  /*
  try {
    const mq = window.matchMedia('(prefers-color-scheme: dark)');
    mq.addEventListener('change', (e) => {
      let saved = null;
      try { saved = localStorage.getItem(THEME_KEY); } catch(e) {}
      if (!saved) {
        applyTheme(e.matches ? 'dark' : 'light');
      }
    });
  } catch(e){}
  */

})();
</script>
</body>
</html>










